<ng-container *ngIf="user">
  <div class="card card-custom" [formGroup]="formGroup">
    <!-- begin::Loading -->
    <ng-container *ngIf="isLoading$ | async">
      <div class="progress progress-modal">
        <div
          class="
            progress-bar progress-bar-striped progress-bar-animated
            bg-primary
          "
          role="progressbar"
          style="width: 100%"
          aria-valuenow="100"
          aria-valuemin="0"
          aria-valuemax="100"
        ></div>
      </div>
    </ng-container>
    <!-- end::Loading -->
    <!--begin::Header-->
    <div class="card-header py-3">
      <div class="card-title align-items-start flex-column">
        <h3 class="card-label font-weight-bolder text-dark">
          {{ 'USER_PROFILE.CHANGE_PASSWORD.HEADER.title' | translate }}
        </h3>
        <span class="text-muted font-weight-bold font-size-sm mt-1">{{
          'USER_PROFILE.CHANGE_PASSWORD.HEADER.subTitle' | translate
        }}</span>
      </div>
      <div class="card-toolbar">
        <app-button
          [isLoading]="btnIsLoading"
          [label]="
            'USER_PROFILE.CHANGE_PASSWORD.HEADER.btnSaveChange' | translate
          "
          [isDisabled]="formGroup.invalid || !formGroup.dirty"
          [ngClass]="
            formGroup.invalid || !formGroup.dirty
              ? 'cursor-default'
              : 'cursor-pointer'
          "
          [cssClasses]="['mr-2']"
          (buttonClick)="btnIsLoading = true; save()"
        >
        </app-button>
        <app-button
          [label]="'USER_PROFILE.CHANGE_PASSWORD.HEADER.btnCancel' | translate"
          [cssClasses]="['ml-2']"
          [backgroundColor]="'#f3f6f9'"
          [fontColor]="'#7e8299'"
          (buttonClick)="cancel()"
        >
        </app-button>
      </div>
    </div>
    <!--end::Header-->
    <!--begin::Form-->
    <div class="form">
      <div class="card-body">
        <!--begin::Alert-->
        <div
          class="
            alert alert-custom alert-light-danger alert-dismissible
            fade
            show
            mb-10
          "
          role="alert"
          [ngClass]="showAlert ? 'd-flex' : 'd-none'"
        >
          <div class="alert-icon">
            <span
              class="svg-icon svg-icon-3x svg-icon-danger"
              [inlineSVG]="'./assets/media/svg/icons/Code/Info-circle.svg'"
              [cacheSVG]="true"
            >
            </span>
          </div>
          <div class="alert-text font-weight-bold">
            {{ 'USER_PROFILE.CHANGE_PASSWORD.BODY.textAlert' | translate }}
          </div>
          <div class="alert-close">
            <button type="button" class="close" (click)="showAlert = false">
              <span aria-hidden="true">
                <i class="ki ki-close"></i>
              </span>
            </button>
          </div>
        </div>
        <!--end::Alert-->
        <div class="form-group row">
          <div class="col-12 col-md-8 offset-md-2">
            <label class="font-size-h6 font-weight-bold text-dark">{{
              'USER_PROFILE.CHANGE_PASSWORD.BODY.currentPassword' | translate
            }}</label>
            <app-input
              [placeholder]="'Enter current password'"
              [type]="'password'"
              [formControl]="CurrentPassword"
              [ref]="'suffix'"
              [icon]="
                CurrentPassword.touched
                  ? CurrentPassword.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'lock'
              "
              [iconColor]="
                CurrentPassword.touched
                  ? CurrentPassword.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
              #currentPassword
            >
            </app-input>
          </div>
        </div>

        <div class="form-group row">
          <div class="col-12 col-md-8 offset-md-2">
            <label class="font-size-h6 font-weight-bold text-dark">{{
              'USER_PROFILE.CHANGE_PASSWORD.BODY.newPassword' | translate
            }}</label>
            <app-input
              [placeholder]="'Enter new password'"
              [type]="'password'"
              [formControl]="NewPassword"
              [ref]="'suffix'"
              [icon]="
                NewPassword.touched
                  ? NewPassword.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'lock'
              "
              [iconColor]="
                NewPassword.touched
                  ? NewPassword.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
        </div>

        <div class="form-group row">
          <div class="col-12 col-md-8 offset-md-2">
            <label class="font-size-h6 font-weight-bold text-dark">{{
              'USER_PROFILE.CHANGE_PASSWORD.BODY.confirmPassword' | translate
            }}</label>
            <app-input
              [placeholder]="'Enter password confirmation'"
              [type]="'password'"
              [formControl]="ConfirmPassword"
              [ref]="'suffix'"
              [icon]="
                ConfirmPassword.touched
                  ? ConfirmPassword.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'lock'
              "
              [iconColor]="
                ConfirmPassword.touched
                  ? ConfirmPassword.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
        </div>
      </div>
    </div>
    <!--end::Form-->
  </div>
</ng-container>
