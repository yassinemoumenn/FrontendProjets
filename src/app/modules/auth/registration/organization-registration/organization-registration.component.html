<div
  #wizard
  class="wizard wizard-1"
  id="kt_wizard_v1"
  data-wizard-state="step-first"
  data-wizard-clickable="true"
>
  <div class="wizard-nav border-bottom">
    <div class="wizard-steps p-8 p-lg-10">
      <a
        class="wizard-step"
        href="javascript:;"
        data-wizard-type="step"
        data-wizard-state="current"
      >
        <div class="wizard-label">
          <i class="wizard-icon flaticon-bus-stop"></i>
          <h3 class="wizard-title">1) Account Information</h3>
        </div>
      </a>
      <a class="wizard-step" href="javascript:;" data-wizard-type="step">
        <div class="wizard-label">
          <i class="wizard-icon flaticon-list"></i>
          <h3 class="wizard-title">2) User Details</h3>
        </div>
      </a>
      <a class="wizard-step" href="javascript:;" data-wizard-type="step">
        <div class="wizard-label">
          <i class="wizard-icon flaticon-responsive"></i>
          <h3 class="wizard-title">3) Organization Details</h3>
        </div>
      </a>
      <a class="wizard-step" href="javascript:;" data-wizard-type="step">
        <div class="wizard-label">
          <i class="wizard-icon flaticon-globe"></i>
          <h3 class="wizard-title">4) Review and Submit</h3>
        </div>
      </a>
    </div>
  </div>

  <div class="d-flex align-items-center justify-content-center">
    <!--begin::Signup-->
    <div class="login-form login-signup pt-5" id="login">
      <!--begin::Form-->

      <form
        class="form"
        novalidate="novalidate"
        id="kt_login_signup_form"
        [formGroup]="registrationForm"
        (ngSubmit)="submit()"
      >
        <!--begin::Title-->
        <!-- <div class="pb-5 pt-lg-0 pt-5">
          <h3 class="font-weight-bolder text-dark font-size-h4 font-size-h1-lg">
            {{ 'REGISTRATION.SINGUPASORG' | translate }}
          </h3>
          <p class="text-muted font-weight-bold font-size-h4">
            {{ 'REGISTRATION.SIGNUP_MESSAGE' | translate }}
          </p>
        </div> -->
        <!--end::Title-->

        <!-- begin::Alert error-->
        <ng-container *ngIf="hasError2">
          <div
            class="
              mb-10
              alert alert-custom alert-light-danger alert-dismissible
            "
          >
            <div class="alert-text">
              {{ 'REGISTRATION.SUBMITERROR' | translate }}
            </div>
          </div>
        </ng-container>
        <!-- end:: error-->

        <div
          class="pb-5"
          data-wizard-type="step-content"
          data-wizard-state="current"
          formGroupName="accountInfo"
        >
          <!--begin::Form group-->
          <div class="pb-5 pt-lg-0 pt-5">
            <h3
              class="font-weight-bolder text-dark font-size-h4 font-size-h1-lg"
            >
              Setup Your Account details
            </h3>
          </div>
          <div class="form-group" required>
            <label
              class="font-size-h6 font-weight-bolder text-dark pt-1"
              #emailVal
              >Email</label
            >
            <app-input
              [type]="'email'"
              [formControl]="Email"
              formControlName="email"
              [placeholder]="'Email'"
              [ref]="'suffix'"
              [showSpinner]="showSpinnerEmail"
              [icon]="
                !showSpinnerEmail
                  ? (Email.touched && Phone.value === '') ||
                    (Email.touched && Phone.value !== '' && Email.value !== '')
                    ? Email.invalid
                      ? 'error'
                      : 'check_circle'
                    : 'email'
                  : ''
              "
              [iconColor]="
                (Email.touched && Phone.value === '') ||
                (Email.touched && Phone.value !== '' && Email.value !== '')
                  ? Email.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group" formGroupName="phone">
            <label
              class="font-size-h6 font-weight-bolder text-dark pt-1"
              style="display: block"
            >
              {{ 'REGISTRATION.PHONE' | translate }}
            </label>
            <app-input
              [ref]="'phone'"
              [formControl]="Phone"
              [placeholder]="'REGISTRATION.PHONE' | translate"
              formControlName="placeHolder"
              (countryChanged)="CountryChange($event)"
              [showSpinner]="showSpinnerPhone"
              [icon]="
                !showSpinnerPhone
                  ? Phone.touched && Phone.value !== ''
                    ? Phone.invalid
                      ? 'error'
                      : 'check_circle'
                    : 'phone'
                  : ''
              "
              [iconColor]="
                Phone.touched && Phone.value !== ''
                  ? Phone.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1">{{
              'REGISTRATION.PASSWORD' | translate
            }}</label>
            <app-input
              [type]="'password'"
              formControlName="password"
              [placeholder]="'REGISTRATION.PASSWORD' | translate"
              [ref]="'suffix'"
              [icon]="
                Password.touched
                  ? Password.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'lock'
              "
              [iconColor]="
                Password.touched
                  ? Password.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1">{{
              'REGISTRATION.CPASSWORD' | translate
            }}</label>
            <app-input
              [type]="'password'"
              formControlName="cPassword"
              [placeholder]="'REGISTRATION.CPASSWORD' | translate"
              [ref]="'suffix'"
              [icon]="
                CPassword.touched
                  ? CPassword.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'lock'
              "
              [iconColor]="
                CPassword.touched
                  ? CPassword.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->
        </div>

        <div
          class="pb-5"
          data-wizard-type="step-content"
          formGroupName="personalInfo"
        >
          <div class="pb-5 pt-lg-0 pt-5">
            <h3
              class="font-weight-bolder text-dark font-size-h4 font-size-h1-lg"
            >
              Enter user details
            </h3>
          </div>
          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1">{{
              'REGISTRATION.FNAM' | translate
            }}</label>
            <app-input
              [type]="'text'"
              formControlName="firstname"
              [formControl]="Firstname"
              [placeholder]="'REGISTRATION.CPASSWORD' | translate"
              [ref]="'suffix'"
              [icon]="
                Firstname.touched
                  ? Firstname.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'account_circle'
              "
              [iconColor]="
                Firstname.touched
                  ? Firstname.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1">{{
              'REGISTRATION.LNAM' | translate
            }}</label>
            <app-input
              [type]="'text'"
              formControlName="lastname"
              [placeholder]="'REGISTRATION.LNAM' | translate"
              [ref]="'suffix'"
              [icon]="
                Lastname.touched
                  ? Lastname.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'account_circle'
              "
              [iconColor]="
                Lastname.touched
                  ? Lastname.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1">{{
              'REGISTRATION.USERNAME' | translate
            }}</label>
            <app-input
              [type]="'text'"
              [formControl]="Username"
              [placeholder]="'REGISTRATION.USERNAME' | translate"
              [ref]="'suffix'"
              [showSpinner]="showSpinnerUsername"
              [icon]="
                !showSpinnerUsername
                  ? Username.touched
                    ? Username.invalid
                      ? 'error'
                      : 'check_circle'
                    : 'account_box'
                  : ''
              "
              [iconColor]="
                Username.touched
                  ? Username.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1">{{
              'REGISTRATION.BIRTHD' | translate
            }}</label>
            <app-datepicker
              [placeholder]="'Date of birth'"
              [formControl]="Birthday"
              [isRequired]="true"
              [maxDate]="maxDate"
              [minDate]="minDate"
              [icon]="
                Birthday.touched
                  ? Birthday.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'date_range'
              "
              [iconColor]="
                Birthday.touched
                  ? Birthday.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-datepicker>
          </div>
        </div>
        <div
          class="pb-5"
          data-wizard-type="step-content"
          formGroupName="OrganizationInfo"
        >
          <div class="pb-5 pt-lg-0 pt-5">
            <h3
              class="font-weight-bolder text-dark font-size-h4 font-size-h1-lg"
            >
              Setup Organization Details
            </h3>
          </div>

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1">{{
              'REGISTRATION.ORGNAME' | translate
            }}</label>
            <app-input
              [type]="'text'"
              [formControl]="OrganizationName"
              [placeholder]="'REGISTRATION.ORGNAME' | translate"
              [ref]="'suffix'"
              [showSpinner]="showSpinnerInstitutionName"
              [icon]="
                !showSpinnerInstitutionName
                  ? OrganizationName.touched
                    ? OrganizationName.invalid
                      ? 'error'
                      : 'check_circle'
                    : 'work'
                  : ''
              "
              [iconColor]="
                OrganizationName.touched
                  ? OrganizationName.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1"
              >Address</label
            >
            <app-input
              [type]="'text'"
              formControlName="location"
              [placeholder]="'Address'"
              [ref]="'suffix'"
              [icon]="
                OrganizationLocation.touched
                  ? OrganizationLocation.invalid
                    ? 'error'
                    : 'check_circle'
                  : 'location_on'
              "
              [iconColor]="
                OrganizationLocation.touched
                  ? OrganizationLocation.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1">{{
              'REGISTRATION.SECTOR' | translate
            }}</label>

            <app-select
              [label]="'REGISTRATION.SECTOR' | translate"
              [placeholder]="'REGISTRATION.SECTOR' | translate"
              [items]="domains"
              formControlName="domain"
            >
            </app-select>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="font-size-h6 font-weight-bolder text-dark pt-1"
              >website</label
            >
            <app-input
              [type]="'text'"
              formControlName="url"
              [formControl]="Url"
              [placeholder]="'Website'"
              [ref]="'suffix'"
              [icon]="
                Url.touched ? (Url.invalid ? 'error' : 'check_circle') : 'http'
              "
              [iconColor]="
                Url.touched
                  ? Url.invalid
                    ? 'text-danger'
                    : 'text-success'
                  : undefined
              "
            >
            </app-input>
          </div>
          <!--end::Form group-->

          <!--begin::Form group-->
          <div class="form-group">
            <label class="checkbox mb-0 checkBox">
              <input type="checkbox" formControlName="agree" name="agree" />
              <span></span>
              &nbsp;{{ 'REGISTRATION.AGREE' | translate }}&nbsp;<a
                href="#"
                target="_blank"
                >{{ 'REGISTRATION.CONDITION' | translate }}</a
              >.&nbsp;
            </label>
          </div>
          <!--end::Form group-->
        </div>
        <div class="pb-5" data-wizard-type="step-content">
          <div class="pb-5 pt-lg-0 pt-5">
            <h3
              class="font-weight-bolder text-dark font-size-h4 font-size-h1-lg"
            >
              Review your Details and Submit
            </h3>
          </div>
          <div
            class="border-bottom mb-5 pb-5"
            *ngIf="Email.errors || Username.errors || OrganizationName.errors"
          >
            <div
              class="
                font-weight-bolder
                mb-3
                symbol symbol-60 symbol-xxl-100
                mr-5
                align-self-start align-self-xxl-center
              "
            >
              <i class="symbol-badge bg-danger blink"></i>
            </div>
            <div class="line-height-xl text-danger">
              <div>
                {{ Email.errors?.alreadyTaken }}
              </div>

              <div>
                {{ Username.errors?.alreadyTaken }}
              </div>

              <div>
                {{ OrganizationName.errors?.alreadyTaken }}
              </div>
            </div>
          </div>
          <div class="border-bottom mb-5 pb-5">
            <div class="font-weight-bolder mb-3">Authentication Details:</div>
            <div class="line-height-xl">
              <span *ngIf="Email.value"> Email : {{ Email.value }}<br /></span>

              <span *ngIf="Phone.value"> Phone : {{ Phone.value }}<br /></span>

              Username : {{ Username.value }}
            </div>
          </div>
          <div class="border-bottom mb-5 pb-5">
            <div class="font-weight-bolder mb-3">User Details:</div>
            <div class="line-height-xl">
              First name : {{ Firstname.value }}
              <br />
              Last name : {{ Lastname.value }} <br />
              Date of birth : {{ Birthday.value | date: 'fullDate' }}
            </div>
          </div>
          <div class="border-bottom mb-5 pb-5">
            <div class="font-weight-bolder mb-3">Organization Details:</div>
            <div class="line-height-xl">
              organizationName :
              {{ OrganizationName.value }}
              <br />
              Address : {{ OrganizationLocation.value }}
              <br />
              Sector : {{ OrganizationDomain.value }}
              <br />
              <span *ngIf="Url.value"> WebSite : {{ Url.value }}</span>
            </div>
          </div>
        </div>
        <!--begin::Form group [disabled]="registrationForm.get('notification').valid"-->
        <div>
          <a
            class="
              btn btn-primary
              font-weight-bolder font-size-h6
              px-8
              py-4
              my-3
              mr-4
            "
            data-wizard-type="action-prev"
          >
            {{ 'REGISTRATION.PREVIOUS' | translate }}
          </a>
          <button
            type="button"
            [disabled]="disabled"
            class="
              btn btn-primary
              font-weight-bolder font-size-h6
              px-8
              py-4
              my-3
              mr-4
            "
            data-wizard-type="action-next"
          >
            {{ 'REGISTRATION.NEXT' | translate }}
          </button>
          <button
            data-wizard-type="action-submit"
            type="submit"
            (click)="submit()"
            id="kt_login_signup_submit"
            class="
              btn btn-primary
              font-weight-bolder font-size-h6
              px-8
              py-4
              my-3
              mr-4
            "
            [disabled]="registrationForm.invalid"
          >
            {{ 'REGISTRATION.SUBMIT' | translate }}
          </button>

          <!-- || !organizationInfo.controls['agree'].value -->
          <a
            routerLink="/auth/login"
            type="button"
            id="kt_login_signup_cancel"
            class="
              btn btn-light-primary
              font-weight-bolder font-size-h6
              px-8
              py-4
              my-3
            "
          >
            {{ 'REGISTRATION.CANCEL' | translate }}
          </a>
        </div>
        <!--end::Form group-->
      </form>
      <!--end::Form-->
    </div>
    <!--end::Signup-->

    <ng-template
      #formError
      let-control="control"
      let-message="message"
      let-validation="validation"
    >
      <ng-container
        *ngIf="
          control.hasError(validation) && (control.dirty || control.touched)
        "
      >
        <div class="fv-plugins-message-container">
          <div class="fv-help-block">
            {{ message }}
          </div>
        </div>
      </ng-container>
    </ng-template>
  </div>
</div>
